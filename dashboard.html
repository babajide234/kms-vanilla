<!doctype html>
<html title="home">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Home</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <link rel="stylesheet" href="style.css" type="text/css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.3/gsap.min.js"></script>

  <script src="https://unpkg.com/lucide@latest"></script>
  <script>

    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: "#991313",
            bgsecond: "#f1efef",
            text: "#3a3737",
            textsub: "#9a9898",
            border: "#c2bdbd",
            hemp: "#8a7474",
            accent1: "#c39494",
            accent2: "#cdacac",
            sirocco: "#6c7474",
          }
        }
      }
    }

    lucide.createIcons();

  </script>
</head>
<body>
    <div class="flex w-full h-screen overflow-y-hidden">
        <div id="sidebar" class="w-[20%] h-full bg-bgsecond pt-24 hidden md:block">
            <div class=" absolute top-5 left-5 flex gap-2 items-center text-white">
                <div class="">
                    <img src="./img/logo.png" alt="" class=" w-8  ">
                </div>
                <div class="">
                    <h2 class=" font-bold text-sm text-primary">Custodian</h2>
                    <p class=" text-textsub text-xs">Knowledge management System</p>
                </div>
            </div>
            <div class=" py-5">
                <div class="dropdown flex w-[80%] mx-auto rounded-lg flex-col  bg-white relative z-0">
                    <button data-tag class="flex text-primary items-center px-2.5 py-[15px] rounded-lg gap-4 text-sm font-medium">
                        <span class="">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-plus"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
                        </span>
                        Create new content
                    </button>
                    <div data-dropdown class=" w-full absolute hidden z-50 bg-white top-0 left-0 flex flex-col gap-4 rounded-lg px-2.5 py-[15px]  ">
                        <button data-tag class="px-2.5 py-[15px] border-b border-solid border-gray-100">
                            <h2 class="">Select content type</h2>
                        </button>
                        <ul class="">
                            <li class="">
                                <a href="./newarticle.html" class=" hover:bg-slate-50  text-gray-500 py-1 px-2 text-sm flex items-center justify-between">Article
                                <span class="">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-right"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
                                </span>
                                </a>
                            </li>
                            <li class="">
                                <a href="./newimage.html" class=" hover:bg-slate-50  text-gray-500 py-1 px-2 text-sm flex items-center justify-between">Image
                                <span class="">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-right"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
                                </span>
                                </a>
                            </li>
                            <li class="">
                                <a href="./newvideo.html" class=" hover:bg-slate-50  text-gray-500 py-1 px-2 text-sm flex items-center justify-between">Video
                                <span class="">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-right"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
                                </span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class=" flex-1 p-8 overflow-y-scroll">
            <div class=" flex items-center justify-between mb-10">
                <div class=" w-full md:flex-grow">
                    <h1 class=" font-bold text-4xl text-text mb-1">Home</h1>
                    <p class=" capitalize text-gray-500">Welcome to the KMS <span class=" font-bold text-gray-900">Ademola</span> start exploring</p>
                </div>
                <div class="hidden md:flex items-center gap-3">
                    <div class=" bg-[#F5F5F5] rounded-full flex items-center px-4 py-3 focus-within:border border-bg-primary  md:w-[300px]">
                        <!-- <IoSearch class="mr-2 text-xl text-red-800"/> -->
                        <i class="mr-2">
                          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                              <path d="M17.5 17.5L13.875 13.875M15.8333 9.16667C15.8333 12.8486 12.8486 15.8333 9.16667 15.8333C5.48477 15.8333 2.5 12.8486 2.5 9.16667C2.5 5.48477 5.48477 2.5 9.16667 2.5C12.8486 2.5 15.8333 5.48477 15.8333 9.16667Z" stroke="#900000" stroke-width="1.66667" stroke-linecap="round" stroke-linejoin="round"/>
                          </svg>
                        </i>
                        <input type="text" class=" flex-grow bg-[#F5F5F5] focus:outline-none " id="searchInput" placeholder="Search" />
                      </div>
                    <button class=" bg-[#F5F5F5] w-[48px] h-[48px] rounded-full flex justify-center items-center" type="">
                        <i class="">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M9.35395 21C10.0591 21.6224 10.9853 22 11.9998 22C13.0142 22 13.9405 21.6224 14.6456 21M17.9998 8C17.9998 6.4087 17.3676 4.88258 16.2424 3.75736C15.1172 2.63214 13.5911 2 11.9998 2C10.4085 2 8.88235 2.63214 7.75713 3.75736C6.63192 4.88258 5.99977 6.4087 5.99977 8C5.99977 11.0902 5.22024 13.206 4.34944 14.6054C3.6149 15.7859 3.24763 16.3761 3.2611 16.5408C3.27601 16.7231 3.31463 16.7926 3.46155 16.9016C3.59423 17 4.19237 17 5.38863 17H18.6109C19.8072 17 20.4053 17 20.538 16.9016C20.6849 16.7926 20.7235 16.7231 20.7384 16.5408C20.7519 16.3761 20.3846 15.7859 19.6501 14.6054C18.7793 13.206 17.9998 11.0902 17.9998 8Z" stroke="#900000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                              </svg>
                        </i>
                    </button>
                </div>
            </div>
            <div class=" flex flex-col md:flex-row md:items-center justify-between">
                <div class=" w-full md:w-fit mb-3 md:mb-0 px-1 py-1 flex items-center justify-between md:gap-3">
                  <div class="dropdown relative">
                      <button data-tag="all" class=" text-[#606060] group   text-md md:text-md border border-solid border-[#606060] rounded-full py-[10px] px-[20px] flex gap-3 items-center">
                        <span class="text max-w-[150px] truncate">All</span>
                        <span class="  ">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M5 7.5L10 12.5L15 7.5" stroke="#606060" stroke-width="1.66667" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </span>
                      </button>
                      <div data-dropdown class=" hidden w-[271px] px-5 py-[15px] bg-white flex flex-col text-sm text-[#3F3F3F] gap-[10px] shadow-md absolute top-[3rem] left-0 z-[100] rounded-lg ">
                            <button data-sub="all" class="py-1 hover:bg-gray-50 rounded-sm">All</button>
                      </div>
                  </div>
                  <div class=" border-solid border-l-2 py-5 border-gray-300 "></div>
                  <div class="dropdown relative" id="type">
                        <button data-tag="ContentType" class=" text-[#606060] border border-solid border-[#606060] group  text-md md:text-md  rounded-full py-[10px] px-[20px] flex gap-3 items-center">
                            <span class="text max-w-[150px] truncate capitalize">ContentType</span>
                            <span class="  ">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                                    <path d="M5 7.5L10 12.5L15 7.5" stroke="#606060" stroke-width="1.66667" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                            </span>
                        </button>
                        <div data-dropdown class=" hidden w-[271px] px-5 py-[15px] bg-white flex flex-col text-sm text-[#3F3F3F] gap-[10px] shadow-md absolute top-[3rem] left-0 z-[100] rounded-lg ">
                            
                        </div>
                  </div>
                  <div class="dropdown relative" id="subsidiary">
                      <button data-tag="SubsidiaryId" class=" text-[#606060] group text-md md:text-md border border-solid border-[#606060] rounded-full py-[10px] px-[20px] flex gap-3 items-center">
                        <span class="text max-w-[150px] truncate capitalize">Subsidiary</span>
                        <span class="  ">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M5 7.5L10 12.5L15 7.5" stroke="#606060" stroke-width="1.66667" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </span>
                      </button>
                      <div data-dropdown class=" hidden w-[271px] px-5 py-[15px] bg-white flex flex-col text-sm text-[#3F3F3F] gap-[10px] shadow-md absolute top-[3rem] left-0 z-[100] rounded-lg ">
                            
                      </div>
                  </div>
                  <div class="dropdown relative" id="department">
                      <button data-tag="DeptId" class=" text-[#606060] group  text-md md:text-md border border-solid border-[#606060] rounded-full py-[10px] px-[20px] flex gap-3 items-center">
                        <span class="text max-w-[150px] truncate capitalize">Department</span>
                        <span class="  ">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M5 7.5L10 12.5L15 7.5" stroke="#606060" stroke-width="1.66667" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </span>
                      </button>
                      <div data-dropdown class=" hidden w-[271px] px-5 py-[15px] bg-white flex flex-col text-sm text-[#3F3F3F] gap-[10px] shadow-md absolute top-[3rem] left-0 z-[100] rounded-lg ">
                            
                      </div>
                  </div>
                </div>
            </div>
            <div class=" dashboard-content grid grid-cols-1 md:grid-cols-3 py-10 gap-5">
            </div>

        </div>

        <div class="more fixed hidden w-full h-screen bg-[#808080BF] flex items-center justify-end ">
            <div class="more-modal w-[529px] py-[20px] bg-[#F5F5F5] h-screen relative overflow-y-scroll ">
                <div class="pb-[13px] px-[20px]  border-solid border-b border-[#DBDBDB] flex justify-between items-center">
                    <h2 class=" more-title text-[22px] font-semibold"></h2>
                    <button onclick="moretoggle()" class=" p-2 rounded-lg hover:bg-gray-50">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M15.0005 5L5.00049 15M5.00049 5L15.0005 15" stroke="#606060" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                          </svg>
                    </button>
                </div>
                <div class="more-content">
                    
                </div>

                <div class=" p-5  bg-[#F5F5F5] w-full grid grid-cols-2 gap-5">
                    <button class=" w-full px-[14px] py-[10px] rounded-md bg-white text-primary font-semibold">Download</button>
                    <button onclick="sharetoggle()" class=" w-full px-[14px] py-[10px] rounded-md bg-primary text-white font-semibold">Share</button>
                </div>
            </div>
        </div>

        <div class="share hidden fixed w-full h-screen bg-[#808080BF] flex items-center justify-center ">
            <div class="bg-white p-4 w-[600px]  rounded-lg ">
                    <div class=" flex justify-between items-center border-b border-gray-300 py-3">
                        <h2 class=" text-2xl font-semibold">Share</h2>
                        <button onclick="sharetoggle()" class="">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                              </svg>                              
                        </button>
                    </div>
                    <div class=" py-5">
                        <div class=" mb-5">
                            <ul class=" flex items-center ">
                                <li data-tab="email" class=" tab-btn text-textsub  py-2 px-2 text-md border-b-2 border-red-800 hover:cursor-pointer">Send as mail</li>
                                <li data-tab="app" class=" tab-btn  text-textsub py-2 px-2 text-md border-b-2 border-red-800 hover:cursor-pointer">Share in-app</li>
                                <li data-tab="link" class=" tab-btn  text-textsub py-2 px-2 text-md border-b-2 border-red-800 hover:cursor-pointer">Generate link</li>
                            </ul>
                        </div>
                        <div class=" email-tab tab-content w-full flex flex-col gap-5 border border-gray-300 rounded-md py-2 flex items-center px-3">
                            <div class=" w-full gap-3 flex items-center border border-solid border-gray-300 p-3 rounded-md">
                                <span class="">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75" />
                                      </svg>                                      
                                </span>
                                <input type="text" class=" outline-none flex-grow" placeholder="Add email address" />
                            </div>
                            <div class=" w-full flex items-center justify-between">
                                <p class="text-base text-neutral-700 leading-tight">Person shared with </p>
                                <div class="dropdown relative">
                                    <button data-tag="" class=" flex items-center">
                                      <span class="text max-w-[150px] truncate">can view</span>
                                      <span class="  ">
                                          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                                              <path d="M5 7.5L10 12.5L15 7.5" stroke="#606060" stroke-width="1.66667" stroke-linecap="round" stroke-linejoin="round"/>
                                          </svg>
                                      </span>
                                    </button>
                                    <div data-dropdown class=" hidden w-44 h-20 px-5 py-[15px] bg-white flex flex-col text-sm text-[#3F3F3F] gap-[10px] shadow-md absolute top-[3rem] left-0 z-[100] rounded-lg ">
                                          <button data-sub="can view" class="p-1 hover:bg-gray-50 text-left rounded-sm">can view</button>
                                          <button data-sub="can view" class="p-1 hover:bg-gray-50 text-left rounded-sm">can download</button>
                                    </div>
                                </div>
                            </div>
                            <div class=" w-full flex items-center justify-between">
                                <p class="text-base text-neutral-700 leading-tight">Set expiration date</p>
                                <label for="setdate"  class=" hover:cursor-pointer">
                                    <!-- <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5" />
                                    </svg>                                       -->
                                    <input type="date" name="date" class=" " id="setdate">
                                </label>
                            </div>
                            <div class=" w-full flex items-center justify-between">
                                <button class=" text-sm font-semibold text-white bg-primary w-full text-center p-3 rounded-lg">Share</button>
                            </div>
                        </div>
                        <div class=" app-tab tab-content border border-gray-300 rounded-md py-2 flex items-center px-3">
                            app
                        </div>
                        <div class=" link-tab tab-content border border-gray-300 rounded-md py-2 flex items-center px-3">
                            link
                        </div>
                    </div>
                    <div class=" flex justify-end">
                    </div>
            </div>
        </div>
        <div class="fixed top-10 right-10">
            
        </div>
    </div>
    <script src="./common.js"></script>
    <script src="./alert.js"></script>

    <script >
        $(document).ready(function () {

            loadSidebar();
            renderContent(contentData.Result);
            // showToast('success', 'Item moved successfully.');


            $('nav a').click(function (e) {
                e.preventDefault();
                const route = $(this).attr('href').substring(1);
                loadContent(route);
            });

            $('#sidebar .dropdown-toggle').click(function () {
                const $dropdownContent = $(this).siblings('.dropdown-content');
                $dropdownContent.toggleClass('h-0 h-fit');
            });

            // $('button[data-tag]').click(function () {
            //     const tag = $(this).data('tag');
            //     filterContent(tag);
            //     markActiveTag(tag);
            // });

            $('#searchInput').on('input', function () {
                const searchText = $(this).val().toLowerCase();
                filterContentBySearch(searchText);
            });

            
            let filterObject = {};
            


            populateDropdown(Subsidiaries, 'subsidiary');
            populateDropdown(ContentTypes, 'type');
            


            $('.dropdown').each(function () {
                const $button = $(this).find('[data-tag]');
                const $dropdown = $(this).find('[data-dropdown]');
                const dropdownId = $(this).attr('id');

                if ($button.data('tag') === 'all') {
                    console.log('all btns');
                    filterObject = {}; // Reset the filterObject
                    filterContent(filterObject);
                    handleSubsidiaryFilter(filterObject);
                }
                
                
                let currentSelectedValue = ""; 


                $button.click(function (e) {
                    e.stopPropagation(); 
                    console.log(' btns clicked')
                    $dropdown.toggleClass('hidden');
                });


                $dropdown.find('[data-sub]').click(function () {
                    const selectedName = $(this).data('sub');
                    let selectedValue ='';

                    if($button.data('tag') === 'ContentType'){
                        selectedValue = $(this).data('sub');
                    }else{
                        selectedValue = $(this).data('value');
                    }

                    // Check if the selected value is already the current selected value
                    if (filterObject[$button.data('tag')] === selectedValue) {
                        // If it is the same value, remove the selection
                        console.log(filterObject);
                        
                        // Clear the selected value from filterObject
                        filterObject[$button.data('tag')] = ""; 
                        console.log(dropdownId);
                        // Clear the button text
                        $button.find('.text').text(dropdownId); 
                        
                        // Remove the styling from the selected option
                        $button.addClass('text-[#606060] border border-solid border-[#606060]').removeClass('bg-primary text-white');
                        filterContent({});
                        handleSubsidiaryFilter(filterObject);
                    } else {
                        // Update the filter object
                        filterObject[$button.data('tag')] = selectedValue;

                        console.log(filterObject);

                        filterContent(filterObject);
                        handleSubsidiaryFilter(filterObject);

                        // Update the current selected value
                        currentSelectedValue = selectedValue; 
                        $button.find('.text').text(selectedName);
                        $dropdown.addClass('hidden');

                        $dropdown.find('[data-sub]').removeClass('bg-primary text-white');
                        $button.addClass('text-[#606060] border border-solid border-[#606060]').removeClass('bg-primary text-white');
                        $(this).addClass('bg-primary text-white');

                        if ($(this).attr('data-sub')) {
                            $button.removeClass('text-[#606060] border border-solid border-[#606060]').addClass('bg-primary text-white');
                        } else {
                            // If data-sub attribute is not present, you can add an else statement to handle that case
                        }
                    }

                    if ($button.data('tag') === 'all') {
                        console.log('all btns');
                        filterObject = {}; // Reset the filterObject
                        filterContent({});
                        handleSubsidiaryFilter(filterObject);
                    }
                });


                $(document).click(function () {
                    $dropdown.addClass('hidden');
                });
            });
            
            handleSubsidiaryFilter(filterObject);

            filterContent('all');
            markActiveTag('all');
            
            const defaultTab = 'email';
            $(`.tab-btn[data-tab="${defaultTab}"]`).removeClass('text-textsub').addClass('text-text')
            showTab(defaultTab);

            $('.tab-btn').click(function () {
                const tabName = $(this).data('tab');
                showTab(tabName);

                $('.tab-btn').removeClass('text-text').addClass('text-textsub');
                $(this).removeClass('text-textsub').addClass('text-text');
            });
        })
        
        function showTab(tabName) {
            $('.tab-content').hide();
            $(`.${tabName}-tab`).show();
        }

        function handleSubsidiaryFilter(filterObject) {
            if (filterObject && filterObject.SubsidiaryId) {
                const selectedSubsidiaryId = filterObject.SubsidiaryId;
                const departmentsForSubsidiary = getDepartmentsForSubsidiary(selectedSubsidiaryId);
                populateDropdown(departmentsForSubsidiary, 'department');
            }
        }

        function getDepartmentsForSubsidiary(subId) {

            const relationshipsForSubsidiary = SubsidiaryDepartmentRelationships.filter(relationship => {
                return relationship.subId === subId;
            });

            // Extract department IDs from the relationships
            const departmentIds = relationshipsForSubsidiary.map(relationship => relationship.deptId);

            // Map department IDs to department objects
            const departmentsForSubsidiary = Departments.filter(department => {
                return departmentIds.includes(department.id);
            });

            return departmentsForSubsidiary;
        }

        function populateDropdown(data, dropdownId) {
            const dropdown = $(`#${dropdownId} [data-dropdown]`);
            data.forEach(item => {
                const button = `<button data-sub="${item.name}" data-value="${item.id}" class=" capitalize py-1 hover:bg-gray-50 hover:text-primary text-left px-5 rounded-sm">${item.name}</button>`;
                dropdown.append(button);
            });
        }

        function renderContent(content) {
            const $dashboardContent = $('.dashboard-content');
            $dashboardContent.empty();
            console.log(content)
            content.forEach(item=>{

                $dashboardContent.append(`
                    <div class=" w-full flex flex-col justify-between gap-2 border border-border border-solid bg-bgsecond/20 overflow-hidden rounded-lg p-2 group">
                            <div class="flex items-center justify-between gap-3">
                                <div class=" flex items-center truncate overflow-hidden">
                                    <div class=" bg-[#F4E6E6] rounded-md p-[10px] flex items-center justify-center mr-2  ">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                                            <path d="M11.6663 9.16675H6.66634M8.33301 12.5001H6.66634M13.333 5.83341H6.66634M16.6663 5.66675V14.3334C16.6663 15.7335 16.6663 16.4336 16.3939 16.9684C16.1542 17.4388 15.7717 17.8212 15.3013 18.0609C14.7665 18.3334 14.0665 18.3334 12.6663 18.3334H7.33301C5.93288 18.3334 5.23281 18.3334 4.69803 18.0609C4.22763 17.8212 3.84517 17.4388 3.60549 16.9684C3.33301 16.4336 3.33301 15.7335 3.33301 14.3334V5.66675C3.33301 4.26662 3.33301 3.56655 3.60549 3.03177C3.84517 2.56137 4.22763 2.17892 4.69803 1.93923C5.23281 1.66675 5.93288 1.66675 7.33301 1.66675H12.6663C14.0665 1.66675 14.7665 1.66675 15.3013 1.93923C15.7717 2.17892 16.1542 2.56137 16.3939 3.03177C16.6663 3.56655 16.6663 4.26662 16.6663 5.66675Z" stroke="url(#paint0_linear_592_305)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                            <defs>
                                                <linearGradient id="paint0_linear_592_305" x1="9.99967" y1="1.66675" x2="9.99967" y2="18.3334" gradientUnits="userSpaceOnUse">
                                                <stop stop-color="#BF0000" stop-opacity="0.68"/>
                                                <stop offset="1" stop-color="#900000"/>
                                                </linearGradient>
                                            </defs>
                                        </svg>
                                    </div>
                                    <a href="/article.html" class="capitalize font-semibold text-sm truncate hover:text-primary">${item.Title}</a>
                                </div>
                                <button onClick={modal(${item.ContentId})} class=" py-2 px-2 hover:bg-[#F5F5F5] rounded-full flex items-center justify-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class=" stroke-textsub">
                                        <circle cx="12" cy="12" r="1"/>
                                        <circle cx="19" cy="12" r="1"/>
                                        <circle cx="5" cy="12" r="1"/>
                                    </svg>
                                </button>
                            </div>
                            <p class=" text-textsub text-md">
                                ${item.Description}
                            </p>
                            <div class="flex  items-center">
                                <div class=" px-[20px] py-[5px] bg-[#F9F5F5] rounded-full text-xs capitalize text-primary">${item.ContentType}</div>
                            </div>
                    </div>
                `)
            })
        }

        function renderMoreContent(id){
            const data = sigledata.Result;
            const versions = sigledata.Versions;
            const $moreContiner = $('.more-content');

            $moreContiner.empty();
            
            $('.more-title').append(`${data.Title}`);

            if(data.ContentType=== 'Document'){
                $moreContiner.append(`
                        <div class="py-5 px-5 border-solid border-b border-[#DBDBDB] flex flex-col gap-[15px] ">
                            <h2 class=" text-[15px] font-semibold">Decription</h2>
                            <p class=" text-[#808080] text-sm">
                                ${data.Description}
                            </p>
                        </div>
                        <div class="py-5 px-5 border-solid border-b border-[#DBDBDB] flex justify-between items-center ">
                            <h2 class=" text-[15px] text-[#606060]">Category</h2>
                            <p class="">${data.Description}</p>
                        </div>
                        <div class="py-5 px-5 border-solid border-b border-[#DBDBDB] flex justify-between items-center ">
                            <h2 class=" text-[15px] text-[#606060]">Subsidiary</h2>
                            <p class="">${getSubsidiary(data.SubsidiaryId)}</p>
                        </div>
                        <div class="py-5 px-5 border-solid border-b border-[#DBDBDB] flex justify-between items-center ">
                            <h2 class=" text-[15px] text-[#606060]">Department</h2>
                            <p class="">${getDepartment(data.DeptId)}</p>
                        </div>
                        <div class="py-5 px-5 border-solid border-b border-[#DBDBDB] flex justify-between items-center ">
                            <h2 class=" text-[15px] text-[#606060]">Documents</h2>
                            <ul class="flex flex-col gap-2">
                                ${generateDocumentList(sigledata.ContentDocuments)}
                            </ul>
                        </div>
                        <div class="py-5 px-5 border-solid border-b gap-2 border-[#DBDBDB] flex flex-col justify-start  ">
                            <h2 class=" text-[15px] text-[#606060]">Version History</h2>
                            <div class=" flex flex-col justify-between  ">
                                ${renderVariations(versions)}
                            </div>
                        </div>
                    
            
                `);
                
            }
        }

        function generateDocumentList(contentDocuments) {
            return contentDocuments.map(item => `<li class=" flex items-center gap-3 p-2.5 border-solid border border-primary rounded text-primary font-bold text-[10px] ">
                <img class="w-4 h-5" src="./img/pdf.jpg" alt="doc type"/>
                <span>${item.FileName}</span>
            </li>`).join('');
        }

        function renderVariations(variations){
            return variations.map(item=>`
                <div class="border-solid border border-primary rounded p-2.5">
                    <p class="text-xs"><span class="mr-4 text-gray-600 font-bold">Reviwed By:</span>${item.Reviewedby}</p>
                    <p class="text-xs"><span class="mr-4 text-gray-600 font-bold">Created By:</span>${item.Createdby}</p>
                    <p class="text-xs"><span class="mr-4 text-gray-600 font-bold">Date Reviewed :</span>${item.DateReviewed}</p>
                </div>

            `)
        }

        function getSubsidiary(id) {
            const subsidiaries = Subsidiaries

            const subsidiary = subsidiaries.find(sub => sub.id === id);

            return subsidiary.name || null; 
        }
        function getDepartment(id) {

            const Department = Departments.find(sub => sub.id === id);

            return Department.name || null; 
        }

        function filterContent(filters) {
            let filteredContent = contentData.Result;


            // Apply filters based on other criteria (SubsidiaryId, DeptId, ContentType)
            if (filters.SubsidiaryId && filters.SubsidiaryId !== 'all') {
                filteredContent = filteredContent.filter(item => {
                    return item.SubsidiaryId === parseInt(filters.SubsidiaryId);
                });
            }

            if (filters.DeptId && filters.DeptId !== 'all') {
                filteredContent = filteredContent.filter(item => {
                    return item.DeptId === parseInt(filters.DeptId);
                });
            }

            if (filters.ContentType && filters.ContentType !== 'all') {
                filteredContent = filteredContent.filter(item => {
                    return item.ContentType.toLowerCase() === filters.ContentType.toLowerCase();
                });
            }

            renderContent(filteredContent);
        }

        function isEmptyObject(obj) {
            for (const key in obj) {
                if (obj.hasOwnProperty(key)) {
                    return false;
                }
            }
            return true;
        }

        function filterContentBySearch(searchText) {
            const filteredContent = contentData.Result.filter(item => {
                return item.Title.toLowerCase().includes(searchText) || item.Description.toLowerCase().includes(searchText);
            });

            renderContent(filteredContent);
        }

        function markActiveTag(activeTag) {
            $('button[data-tag]').removeClass('bg-primary text-white');
            $(`button[data-tag="${activeTag}"]`).addClass('bg-primary text-white');
        }

        function loadContent(route) {
        // Load content based on the selected route
            switch (route) {
                case 'dashboard':
                    $('#content').html('<h2>This is the Dashboard!</h2><p>Some dashboard content...</p>');
                    break;
                case 'settings':
                    $('#content').html('<h2>Settings Page</h2><p>Configure your settings here...</p>');
                    break;
                default:
                    $('#content').html('<h2>Page Not Found</h2>');
            }
        }

        function modal(id){
            console.log(id)
            moretoggle()
        }
        
        function moretoggle(){
            $('.more').toggleClass('hidden');
            animateMore()
            renderMoreContent()
        }
        function sharetoggle(){
            $('.share').toggleClass('hidden');
        }

        function loadSidebar() {
            const $nav = $('#sidebar');
            console.log(menu);

            menu.forEach(item => {
                if (item.header) {
                    $nav.append(`<h2 class="uppercase mb-5 text-sm font-semibold mx-5 text-gray-500">${item.header}</h2>`);
                } else {
                    if (item.children) {
                        // Dropdown item
                        $nav.append(`<div class="flex flex-col">
                                        <div class=" dropdown-toggle flex justify-between items-center text-[#606060] text-md px-5 py-2 hover:bg-red-800 hover:text-white hover:cursor-pointer w-11/12 rounded-e-md mb-3 capitalize font-normal">
                                            <span class="flex items-center "><i class=" mr-3 text-md">${item.icon}</i><span>${item.name}</span> </span>  <i class=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"/></svg></i>
                                        </div>
                                        <div class="  dropdown-content px-5 flex flex-col h-0 overflow-hidden transition-all duration-500 ease-in-out">
                                            ${item.children.map(child => `<a href="${child.url}" class="px-5 py-2 hover:bg-red-800 hover:text-white w-11/12 rounded-e-md mb-3 capitalize font-normal">${child.name}</a>`).join('')}
                                        </div>
                                    </div>`);
                    } else {
                        // Regular item without dropdown
                        $nav.append(`<a href="${item.url}" class="flex items-center group text-[#606060] text-md px-5 py-2 hover:bg-red-800 hover:text-white hover:cursor-pointer w-11/12 rounded-e-md mb-3 capitalize font-normal">
                                        <i class=" mr-3 text-md">${item.icon}</i><span>${item.name}</span>
                                    </a>`);
                    }
                }
            });
        }
        
        function animateMore(index) {
            gsap.timeline()
                .from( '.more', {
                    opacity: 0, 
                    duration:0.5,
                }).to(
                    '.more',{
                        opacity: 1, 
                        duration: 0.5
                    }
                ).from('.more-modal',{
                    x:'100%',
                    duration: 0.3
                }).to('.more-modal',{
                    x:0,
                    duration: 0.3
                })
                
        }
    </script>
</body>
</html>