<!doctype html>
<html title="home">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Home</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <link rel="stylesheet" href="style.css" type="text/css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.3/gsap.min.js"></script>

  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="https://cdn.tiny.cloud/1/50wdqgqz88fpl68n52tmf8ilkr5udtv1jwcbcymq1f2xe9bo/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
  <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
  <link href="./toast/jquery.toast.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/dropzone@5/dist/min/dropzone.min.css" type="text/css" />

  <script src="./toast/jquery.toast.min.js"></script>
  <script src="https://unpkg.com/dropzone@5/dist/min/dropzone.min.js"></script>

  <script>

    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: "#991313",
            bgsecond: "#f1efef",
            text: "#3a3737",
            textsub: "#9a9898",
            border: "#c2bdbd",
            hemp: "#8a7474",
            accent1: "#c39494",
            accent2: "#cdacac",
            sirocco: "#6c7474",
          }
        }
      }
    }

    lucide.createIcons();

  </script>
</head>
<body>
    <div class="flex w-full h-screen overflow-y-hidden">
        <div id="sidebar" class="w-[20%] h-full bg-bgsecond pt-24 hidden md:block">
            <div class=" absolute top-5 left-5 flex gap-2 items-center text-white">
                <div class="">
                    <img src="./img/logo.png" alt="" class=" w-8  ">
                </div>
                <div class="">
                    <h2 class=" font-bold text-sm text-primary">Custodian</h2>
                    <p class=" text-textsub text-xs">Knowledge management System</p>
                </div>
            </div>
            <div class=" py-5">
                <div class="dropdown flex w-[80%] mx-auto rounded-lg flex-col  bg-white relative z-0">
                    <a href="./content.html" class="flex text-primary items-center px-2.5 py-[15px] rounded-lg gap-4 text-sm font-medium">
                        <span class="">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-plus"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
                        </span>
                        Create new content
                    </a>
                </div>
            </div>
        </div>
        <div class=" flex-1 overflow-y-scroll flex flex-col">
            <div class="article-header px-8 pt-8 pb-4 flex items-center justify-between border-b   border-solid border-gray-300">
                <div class=" flex items-center gap-[30px]">
                    <a href="/dashboard.html" class=" bg-[#F5F5F5] w-[48px] h-[48px] rounded-full flex justify-center items-center " type="">
                        <i class="">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M20 12H4M4 12L10 18M4 12L10 6" stroke="#900000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </i>
                    </a>
                    <input type="text" class=" text-[26px] font-bold placeholder:text-gray-200 px-4 flex-grow outline-none border-none " placeholder="Untitled">
                </div>
                <div class="flex items-center gap-5">
                    <button id="submit" class="py-[8px] px-[14px] bg-[#900000] capitalize text-sm rounded-lg text-white font-semibold ">Submit for review</button>
                    <button class="py-2 px-2  rounded-lg hover:bg-gray-50">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-round-plus"><path d="M2 21a8 8 0 0 1 13.292-6"/><circle cx="10" cy="8" r="5"/><path d="M19 16v6"/><path d="M22 19h-6"/></svg>
                    </button>
                    <button class="py-2 px-2  rounded-lg hover:bg-gray-50">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-eye"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>
                    </button>
                    <button class="py-2 px-2  rounded-lg hover:bg-gray-50">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M12 13C12.5523 13 13 12.5523 13 12C13 11.4477 12.5523 11 12 11C11.4477 11 11 11.4477 11 12C11 12.5523 11.4477 13 12 13Z" stroke="#3F3F3F" stroke-width="1.66667" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M19 13C19.5523 13 20 12.5523 20 12C20 11.4477 19.5523 11 19 11C18.4477 11 18 11.4477 18 12C18 12.5523 18.4477 13 19 13Z" stroke="#3F3F3F" stroke-width="1.66667" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M5 13C5.55228 13 6 12.5523 6 12C6 11.4477 5.55228 11 5 11C4.44772 11 4 11.4477 4 12C4 12.5523 4.44772 13 5 13Z" stroke="#3F3F3F" stroke-width="1.66667" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>
            <div class=" flex">
                <div class=" document-content flex-1 min-h-screen p-8 relative ">
                    <div class=" mb-3">
                        <h2 class=" mb-3 text-md font-semibold capitalize">Description</h2>
                        <textarea name="descriptioninput" id="descriptioninput" rows="5" class="textarea w-full min-h-[50px] p-4 outline-none border border-gray-300 rounded-md text-[#808080] placeholder:text-[#CDCDCD]" placeholder="Write a description..."></textarea>                        
                    </div>
                    <div class="mb-3">
                        <h2 class="mb-3 text-md font-semibold capitalize">Content Type</h2>
                        <select name="contentType" id="contentType" class=" px-2 py-1 outline-none rounded-md border border-gray-300 border-solid">
                            <option value="article" class="">Article</option>
                            <option value="document" class="">Document</option>
                            <option value="video" class="">Video</option>
                            <option value="image" class="">Image</option>
                        </select>
                    </div>
                    <div id="article" class="">
                        <h2 class="mb-3 text-md font-semibold capitalize">content</h2>
                        <div id="editor" class=" min-h-[300px]">
                            
                        </div>                     
                    </div>
                    <div id="image" class="">
                        <h2 class="mb-3 text-md font-semibold capitalize">content</h2>
                        <div id="imageStack" class=" grid grid-cols-3 gap-2">
                            <label for="imageupload"  data-type="image" class="media-upload-container w-full h-40 px-2.5 py-3.5 bg-white hover:cursor-pointer hover:border-primary rounded border border-gray-200 border-dashed flex-col justify-center items-center gap-5 inline-flex">

                                <div class="w-6 h-6 relative">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-image-plus"><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7"/><line x1="16" x2="22" y1="5" y2="5"/><line x1="19" x2="19" y1="2" y2="8"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></svg>
                                </div>
                                <div class="self-stretch h-10 text-center text-zinc-600 text-sm font-normal  leading-tight">Choose an image or drag and drop it here</div>
                                <input type="file" class="hidden" id="imageupload" multiple accept="image/*">
                                
                            </label>
                        </div>
                    </div>
                    <div id="video" class="">
                        <h2 class="mb-3 text-md font-semibold capitalize">content</h2>
                        <div id="videoStack"  class=" grid grid-cols-3 gap-2">
                            <label for="mediaUpload"  data-type="video" class="media-upload-container w-full h-40 px-2.5 py-3.5 bg-white hover:cursor-pointer hover:border-primary rounded border border-gray-200 border-dashed flex-col justify-center items-center gap-5 inline-flex">
                                <div class="w-6 h-6 relative">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-image-plus">
                                        <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7" />
                                        <line x1="16" x2="22" y1="5" y2="5" />
                                        <line x1="19" x2="19" y1="2" y2="8" />
                                        <circle cx="9" cy="9" r="2" />
                                        <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21" />
                                    </svg>
                                </div>
                                <div class="self-stretch h-10 text-center text-zinc-600 text-sm font-normal  leading-tight">Choose media or drag and drop it here</div>
                                <input type="file" class="hidden" id="mediaUpload" multiple accept="video/*">
                            </label>
                        </div>
                    </div>
                    <div id="document" class="">
                        <h2 class="mb-3 text-md font-semibold capitalize">content</h2>
                        <div id="documentStack" class=" grid grid-cols-3 gap-2">
                                                      
                            <label for="mediaUpload"  data-type="document" class="media-upload-container w-full h-40 px-2.5 py-3.5 bg-white hover:cursor-pointer hover:border-primary rounded border border-gray-200 border-dashed flex-col justify-center items-center gap-5 inline-flex">
                                <div class="w-6 h-6 relative">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-image-plus">
                                        <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7" />
                                        <line x1="16" x2="22" y1="5" y2="5" />
                                        <line x1="19" x2="19" y1="2" y2="8" />
                                        <circle cx="9" cy="9" r="2" />
                                        <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21" />
                                    </svg>
                                </div>
                                <div class="self-stretch h-10 text-center text-zinc-600 text-sm font-normal  leading-tight">Choose media or drag and drop it here</div>
                                <input type="file" class="hidden" id="mediaUpload" multiple accept=".pdf, application/pdf, .doc, .docx, application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document">
                            </label>
                        </div>
                    </div>
                </div>
                <div class=" document-dock w-[253px] border-l border-gray-300 border-solid min-h-screen ">
                    <div class=" flex gap-5 px-[10px] py-[15px] items-center border-b border-gray-300 border-solid">
                        <h2 class=" font-bold">Meta data</h2>
                    </div>
                    <div class="remarks-tab tab-content">
                        
                        <div class=" py-3 px-[10px] border-b border-gray-300 border-solid flex items-center justify-between ">
                            <div class=" flex flex-col gap-2 w-full align-start">
                                <label for="" class=" text-sm font-normal">Classification</label>
                                <select name="" id="classificationselect" class=" px-2 py-1 outline-none rounded-md border border-gray-300 border-solid">
                                    <option value="private" class="">
                                        Private
                                    </option>
                                    <option value="general" class="">
                                        General
                                    </option>
                                    <option value="confidential" class="">
                                        Confidential
                                    </option>
                                    <option value="subsidiary" class="">
                                        Subsidiary
                                    </option>
                                </select>
                            </div>
                        </div>
                        <div class=" py-3 px-[10px] border-b border-gray-300 border-solid flex items-center justify-between ">
                            <div class=" flex flex-col gap-2 w-full align-start">
                                <label for="" class=" text-sm font-normal">Subsidiary</label>
                                <select name="" id="subsidiaryselect" class=" px-2 py-1 outline-none rounded-md border border-gray-300 border-solid">
                                    
                                </select>
                            </div>
                        </div>
                        <div class=" py-3 px-[10px] border-b border-gray-300 border-solid flex items-center justify-between ">
                            <div class=" flex flex-col gap-2 w-full align-start">
                                <label for="" class=" text-sm font-normal">Department</label>
                                <select name="" id="departmentselect" class=" px-2 py-1 outline-none rounded-md border border-gray-300 border-solid">
                                    
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="requestUpdate-tab tab-content"></div>
                </div>
            </div>
        </div>
        <div class="more fixed hidden w-full h-screen bg-[#808080BF] flex items-center justify-end ">
            <div class="more-modal w-[529px] py-[20px] bg-[#F5F5F5] h-screen relative overflow-y-scroll ">
                <div class="pb-[13px] px-[20px]  border-solid border-b border-[#DBDBDB] flex justify-between items-center">
                    <h2 class=" text-[22px] font-semibold">Title</h2>
                    <button onclick="moretoggle()" class=" p-2 rounded-lg hover:bg-gray-50">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M15.0005 5L5.00049 15M5.00049 5L15.0005 15" stroke="#606060" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                          </svg>
                    </button>
                </div>
                <div class=" ">
                    <div class="py-5 px-5 border-solid border-b border-[#DBDBDB] flex flex-col gap-[15px] ">
                        <h2 class=" text-[15px] font-semibold">Decription</h2>
                        <p class=" text-[#808080] text-sm">
                            The "New Employee Guide" folder is a comprehensive resource designed to orient and support individuals who have recently joined an organization. This folder serves as a one-stop repository for essential information that new employees need to navigate their way through the onboarding process and integrate seamlessly into the company culture. It includes a range of documents such as welcome messages, an organizational chart, policies and procedures, employee benefits information, and details on workplace etiquette.
                        </p>
                    </div>
                    <div class="py-5 px-5 border-solid border-b border-[#DBDBDB] flex justify-between items-center ">
                        <h2 class=" text-[15px] text-[#606060]">Category</h2>
                        <p class="">video</p>
                    </div>
                    <div class="py-5 px-5 border-solid border-b border-[#DBDBDB] flex justify-between items-center ">
                        <h2 class=" text-[15px] text-[#606060]">Subsidiary</h2>
                        <p class="">Custodian Trustees LTD</p>
                    </div>
                    <div class="py-5 px-5 border-solid border-b border-[#DBDBDB] flex justify-between items-center ">
                        <h2 class=" text-[15px] text-[#606060]">Department</h2>
                        <p class="">Legal and Compliance</p>
                    </div>
                    <div class="py-5 px-5 border-solid border-b border-[#DBDBDB] flex justify-between items-center ">
                        <h2 class=" text-[15px] text-[#606060]">Role</h2>
                        <p class="">Compliance auditor</p>
                    </div>
                    <div class="py-5 px-5 border-solid border-b border-[#DBDBDB] flex justify-between items-center ">
                        <h2 class=" text-[15px] text-[#606060]">Size</h2>
                        <p class="">1.3 GB</p>
                    </div>
                    <div class="py-5 px-5 border-solid border-b border-[#DBDBDB] flex justify-between items-center ">
                        <h2 class=" text-[15px] text-[#606060]">Created by</h2>
                        <p class="">Adetokunbo Adeoluwa</p>
                    </div>
                    <div class="py-5 px-5 border-solid border-b border-[#DBDBDB] flex justify-between items-center ">
                        <h2 class=" text-[15px] text-[#606060]">Date created</h2>
                        <p class="">10 January 2017</p>
                    </div>
                    <div class="py-5 px-5 border-solid border-b border-[#DBDBDB] flex justify-between items-center ">
                        <h2 class=" text-[15px] text-[#606060]">Most recent update</h2>
                        <p class="">23 October 2023</p>
                    </div>
                    <div class="py-5 px-5 border-solid border-b border-[#DBDBDB] flex justify-between items-center ">
                        <h2 class=" text-[15px] text-[#606060]">Updated by</h2>
                        <p class="">Yinka Ogunmepon</p>
                    </div>
                    <div class="py-5 px-5 border-solid border-b border-[#DBDBDB] flex justify-between items-center ">
                        <h2 class=" text-[15px] text-[#606060]">Bookmark</h2>
                        <p class="">video</p>
                    </div>
                </div>

                <div class=" p-5  bg-[#F5F5F5] w-full grid grid-cols-2 gap-5">
                    <button class=" w-full px-[14px] py-[10px] rounded-md bg-white text-primary font-semibold">Download</button>
                    <button class=" w-full px-[14px] py-[10px] rounded-md bg-primary text-white font-semibold">Share</button>
                </div>
            </div>
        </div>
    </div>
    <script src="./common.js"></script>

    <script >
        $(document).ready(function () {

            loadSidebar();
            renderContent(contentData.Result);
            getSubsidiary();
            getDepartment();

            var quill = new Quill('#editor', {
                theme: 'snow',
                placeholder: '',
            });

            $("#article, #image, #video, #document").addClass('hidden');
            $("#article").removeClass('hidden');

            $("#contentType").change(function () {
                var selectedValue = $(this).val();
                $("#article, #image, #video,#document").addClass('hidden');
                $("#" + selectedValue).removeClass('hidden');
            });

            $('#submit').click(function () {
                // Get values from input, select, and file elements
                var description = $('#descriptioninput').val();
                var contentType = $('#contentType').val();
                var content = quill.getContents();
                var classification = $('#classificationselect').val();
                var subsidiary = $('#subsidiaryselect').val();
                var department = $('#departmentselect').val();

                // Validate the fields
                if (description.trim() === '') {
                    showError('Description is required.');
                } else if (contentType.trim() === '') {
                    showError('Content Type is required.');
                } else if (classification.trim() === '') {
                    showError('Classification is required.');
                } else if (subsidiary.trim() === '') {
                    showError('Subsidiary is required.');
                } else if (department.trim() === '') {
                    showError('Department is required.');
                } else {
                    // If all validations pass, you can proceed with further actions
                    var data = {
                        "description": description,
                        "contentType": contentType,
                        "content": content,
                        "classification": classification,
                        "subsidiary": subsidiary,
                        "department": department
                    };

                    console.log(data);

                    // Your code to submit the form or perform other actions
                    // For example: $.ajax({ method: 'POST', url: 'your_api_url', data: data, success: function(response) { /* Handle success */ }, error: function(error) { /* Handle error */ } });
                }
            });

            $('nav a').click(function (e) {
                e.preventDefault();
                const route = $(this).attr('href').substring(1);
                loadContent(route);
            });

            $('#sidebar .dropdown-toggle').click(function () {
                const $dropdownContent = $(this).siblings('.dropdown-content');
                $dropdownContent.toggleClass('h-0 h-fit');
            });



            $('#searchInput').on('input', function () {
                const searchText = $(this).val().toLowerCase();
                filterContentBySearch(searchText);
            });

            populateDropdown(Subsidiaries, 'organization');
            populateDropdown(ContentTypes, 'type');
            populateDropdown(Departments, 'department');
            
            let filterObject = {};

            $('.dropdown').each(function () {
                const $button = $(this).find('[data-tag]');
                const $dropdown = $(this).find('[data-dropdown]');
            
                let currentSelectedValue = ""; 


                $button.click(function (e) {
                    e.stopPropagation(); 
                    $dropdown.toggleClass('hidden');
                });

                $dropdown.find('[data-sub]').click(function () {
                    const selectedValue = $(this).data('sub');

                    // Check if the selected value is already the current selected value
                    if (filterObject[$button.data('tag')] === selectedValue) {
                        // If it is the same value, remove the selection
                        filterObject[$button.data('tag')] = ""; // Clear the selected value from filterObject
                        $button.find('.text').text($button.data('tag')); // Clear the button text
                        $(this).removeClass('bg-primary text-white'); // Remove the styling from the selected option
                    } else {
                        // Update the filter object
                        filterObject[$button.data('tag')] = selectedValue;


                        filterContent(filterObject);

                        currentSelectedValue = selectedValue; // Update the current selected value
                        $button.find('.text').text(selectedValue);
                        $dropdown.addClass('hidden');

                        $dropdown.find('[data-sub]').removeClass('bg-primary text-white');
                        $(this).addClass('bg-primary text-white');

                        if ($(this).attr('data-sub')) {
                            $button.removeClass('text-[#606060] border border-solid border-[#606060]').addClass('bg-primary text-white');
                        } else {
                            // If data-sub attribute is not present, you can add an else statement to handle that case
                        }
                    }
                });


                $(document).click(function () {
                    $dropdown.addClass('hidden');
                });
            });
            
            filterContent('all');
            markActiveTag('all');

            $('.media-upload-container').on('dragover', function (e) {
                e.preventDefault();
                $(this).removeClass('border-gray-200').addClass('border-primary');
            });

            $('.media-upload-container').on('dragleave', function () {
                $(this).removeClass('border-primary').addClass('border-gray-200');
            });

            $('.media-upload-container').on('drop', function (e) {
                e.preventDefault();
                $(this).removeClass('border-primary').addClass('border-gray-200');

                var files = e.originalEvent.dataTransfer.files;
                handleFiles(files, $(this));
            });

            $('.media-upload-container').on('click', function () {
                $(this).find('input[type=file]').click();
            });

            $('input[type=file]').on('change', function () {
                var files = this.files;
                handleFiles(files, $(this).closest('.media-upload-container'));
            });

            
        })

        function handleFiles(files, container) {
            var dataType = container.data('type');
            var stack = $('#' + dataType + 'Stack');

            // Append each file to the respective stack
            for (var i = 0; i < files.length; i++) {
                (function (file,index) { // Use a closure to capture the correct file
                    var reader = new FileReader();

                    reader.onload = function (e) {
                        var mediaItem;

                        // Check file type and apply different templates
                        if (file.type.startsWith('image/')) {
                            mediaItem = $(`
                                <div class="media-item relative group w-full h-40">
                                    <img class="object-fit-cover w-full h-full rounded" src="${e.target.result}" alt="Image ${index + 1}">
                                    <button class="delete-icon absolute top-3 right-3 bg-white text-gray-600 p-1 rounded-full opacity-0 group-hover:opacity-100" data-index="${index}">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x">
                                            <line x1="18" y1="6" x2="6" y2="18"></line>
                                            <line x1="6" y1="6" x2="18" y2="18"></line>
                                        </svg>
                                    </button>
                                </div>
                            `);
                        } else if (file.type.startsWith('video/')) {
                            mediaItem = $(`
                            <div class="media-item relative group w-full h-40">            
                                <video class="object-fit-cover w-full h-full rounded" controls><source src="${e.target.result}" type="${mediaFile.type}"></video>
                                <button class="delete-icon absolute top-3 right-3 bg-white text-gray-600 p-1 rounded-full opacity-0 group-hover:opacity-100" data-index="${i}">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x">
                                        <line x1="18" y1="6" x2="6" y2="18"></line>
                                        <line x1="6" y1="6" x2="18" y2="18"></line>
                                    </svg>
                                </button>
                            </div>`
                            );
                        } else if (file.type.startsWith('application/pdf')) {
                            mediaItem = $('<div class="media-item">' +
                                '<iframe src="' + e.target.result + '" width="100%" height="100%"></iframe>' +
                                '<p>' + file.name + '</p>' +
                                '</div>');
                        } else {
                            // Add more conditions for different file types
                            mediaItem = $('<div class="media-item">' +
                                '<p>Unsupported file type: ' + file.type + '</p>' +
                                '<p>' + file.name + '</p>' +
                                '</div>');
                        }

                        stack.prepend(mediaItem);
                    };

                    reader.readAsDataURL(file);
                })(files[i]);
            }
            stack.on('click', '.delete-icon', function () {
                $(this).closest('.media-item').remove();
            });
    }
    
        function showTab(tabName) {
            $('.tab-content').hide();
            $(`.${tabName}-tab`).show();
        }
        
        function showError(message) {
            $.toast({
                heading: 'Error',
                text: message,
                showHideTransition: 'fade',
                icon: 'error'
            });
        }

        function populateDropdown(data, dropdownId) {
            const dropdown = $(`#${dropdownId} [data-dropdown]`);
            data.forEach(item => {
                const button = `<button data-sub="${item.name}" class="py-1 hover:bg-gray-50 hover:text-primary text-left px-10 rounded-sm">${item.name}</button>`;
                dropdown.append(button);
            });
        }

        function renderContent(content) {
            const $dashboardContent = $('.dashboard-content');
            $dashboardContent.empty();
            console.log(content)
            content.forEach(item=>{

                $dashboardContent.append(`
                    <div class=" w-full flex flex-col justify-between gap-2 border border-border border-solid bg-bgsecond/20 overflow-hidden rounded-lg p-2 group">
                            <div class="flex items-center justify-between gap-3">
                                <div class=" flex items-center truncate overflow-hidden">
                                    <div class=" bg-[#F4E6E6] rounded-md p-[10px] flex items-center justify-center mr-2  ">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                                            <path d="M11.6663 9.16675H6.66634M8.33301 12.5001H6.66634M13.333 5.83341H6.66634M16.6663 5.66675V14.3334C16.6663 15.7335 16.6663 16.4336 16.3939 16.9684C16.1542 17.4388 15.7717 17.8212 15.3013 18.0609C14.7665 18.3334 14.0665 18.3334 12.6663 18.3334H7.33301C5.93288 18.3334 5.23281 18.3334 4.69803 18.0609C4.22763 17.8212 3.84517 17.4388 3.60549 16.9684C3.33301 16.4336 3.33301 15.7335 3.33301 14.3334V5.66675C3.33301 4.26662 3.33301 3.56655 3.60549 3.03177C3.84517 2.56137 4.22763 2.17892 4.69803 1.93923C5.23281 1.66675 5.93288 1.66675 7.33301 1.66675H12.6663C14.0665 1.66675 14.7665 1.66675 15.3013 1.93923C15.7717 2.17892 16.1542 2.56137 16.3939 3.03177C16.6663 3.56655 16.6663 4.26662 16.6663 5.66675Z" stroke="url(#paint0_linear_592_305)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                            <defs>
                                                <linearGradient id="paint0_linear_592_305" x1="9.99967" y1="1.66675" x2="9.99967" y2="18.3334" gradientUnits="userSpaceOnUse">
                                                <stop stop-color="#BF0000" stop-opacity="0.68"/>
                                                <stop offset="1" stop-color="#900000"/>
                                                </linearGradient>
                                            </defs>
                                        </svg>
                                    </div>
                                    <a href="/article.html" class="capitalize font-semibold text-sm truncate hover:text-primary">${item.Title}</a>
                                </div>
                                <button onClick={modal(${item.ContentId})} class=" py-2 px-2 hover:bg-[#F5F5F5] rounded-full flex items-center justify-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class=" stroke-textsub">
                                        <circle cx="12" cy="12" r="1"/>
                                        <circle cx="19" cy="12" r="1"/>
                                        <circle cx="5" cy="12" r="1"/>
                                    </svg>
                                </button>
                            </div>
                            <p class=" text-textsub text-md">
                                ${item.Description}
                            </p>
                            <div class="flex  items-center">
                                <div class=" px-[20px] py-[5px] bg-[#F9F5F5] rounded-full text-xs capitalize text-primary">${item.ContentType}</div>
                            </div>
                    </div>
                `)
            })
        }

        function getSubsidiary() {
                const subsidiaries = Subsidiaries; 
                const selectElement = $('#subsidiaryselect');

                subsidiaries.forEach(subsidiary => {
                    const optionElement = $(`<option value="${subsidiary.id}">${subsidiary.name}</option>`);

                 
                    selectElement.append(optionElement);
                });

        }

        function getDepartment() {
            const Department = Departments; 
            const selectElement = $('#departmentselect');
            // Populate options with subsidiaries
            Department.forEach(Dep => {
                const optionElement = $(`<option value="${Dep.id}">${Dep.name}</option>`);
                selectElement.append(optionElement);
            });
        }     


        function filterContent(filters) {
            let filteredContent = contentData.Result;


            // Apply filters based on other criteria (SubsidiaryId, DeptId, ContentType)
            if (filters.SubsidiaryId && filters.SubsidiaryId !== 'all') {
                filteredContent = filteredContent.filter(item => {
                    return item.SubsidiaryId === parseInt(filters.SubsidiaryId);
                });
            }

            if (filters.DeptId && filters.DeptId !== 'all') {
                filteredContent = filteredContent.filter(item => {
                    return item.DeptId === parseInt(filters.DeptId);
                });
            }

            if (filters.ContentType && filters.ContentType !== 'all') {
                filteredContent = filteredContent.filter(item => {
                    return item.ContentType.toLowerCase() === filters.ContentType.toLowerCase();
                });
            }

            renderContent(filteredContent);
        }


        function isEmptyObject(obj) {
            for (const key in obj) {
                if (obj.hasOwnProperty(key)) {
                    return false;
                }
            }
            return true;
        }
        function filterContentBySearch(searchText) {
            const filteredContent = contentData.Result.filter(item => {
                return item.Title.toLowerCase().includes(searchText) || item.Description.toLowerCase().includes(searchText);
            });

            renderContent(filteredContent);
        }
        function markActiveTag(activeTag) {
            $('button[data-tag]').removeClass('bg-primary text-white');
            $(`button[data-tag="${activeTag}"]`).addClass('bg-primary text-white');
        }
        function loadContent(route) {
        // Load content based on the selected route
            switch (route) {
                case 'dashboard':
                    $('#content').html('<h2>This is the Dashboard!</h2><p>Some dashboard content...</p>');
                    break;
                case 'settings':
                    $('#content').html('<h2>Settings Page</h2><p>Configure your settings here...</p>');
                    break;
                default:
                    $('#content').html('<h2>Page Not Found</h2>');
            }
        }
        function modal(id){
            console.log(id)
            moretoggle()
        }
        
        function moretoggle(){
            $('.more').toggleClass('hidden');
            animateMore()
        }
        function loadSidebar() {
            const $nav = $('#sidebar');
            console.log(menu);

            menu.forEach(item => {
                if (item.header) {
                    $nav.append(`<h2 class="uppercase mb-5 text-sm font-semibold mx-5 text-gray-500">${item.header}</h2>`);
                } else {
                    if (item.children) {
                        // Dropdown item
                        $nav.append(`<div class="flex flex-col">
                                        <div class=" dropdown-toggle flex justify-between items-center text-[#606060] text-md px-5 py-2 hover:bg-red-800 hover:text-white hover:cursor-pointer w-11/12 rounded-e-md mb-3 capitalize font-normal">
                                            <span class="flex items-center "><i class=" mr-3 text-md">${item.icon}</i><span>${item.name}</span> </span>  <i class=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"/></svg></i>
                                        </div>
                                        <div class="  dropdown-content px-5 flex flex-col h-0 overflow-hidden transition-all duration-500 ease-in-out">
                                            ${item.children.map(child => `<a href="${child.url}" class="px-5 py-2 hover:bg-red-800 hover:text-white w-11/12 rounded-e-md mb-3 capitalize font-normal">${child.name}</a>`).join('')}
                                        </div>
                                    </div>`);
                    } else {
                        // Regular item without dropdown
                        $nav.append(`<a href="${item.url}" class="flex items-center group text-[#606060] text-md px-5 py-2 hover:bg-red-800 hover:text-white hover:cursor-pointer w-11/12 rounded-e-md mb-3 capitalize font-normal">
                                        <i class=" mr-3 text-md">${item.icon}</i><span>${item.name}</span>
                                    </a>`);
                    }
                }
            });
        }
        
        function animateMore(index) {
            gsap.timeline()
                .from( '.more', {
                    opacity: 0, 
                    duration:0.5,
                }).to(
                    '.more',{
                        opacity: 1, 
                        duration: 0.5
                    }
                ).from('.more-modal',{
                    x:'100%',
                    duration: 0.3
                }).to('.more-modal',{
                    x:0,
                    duration: 0.3
                })
                
        }
    </script>
</body>
</html>